<div class="auth-container">
    
    @if (emailSent) {
        <div class="success-state">
            <h2>Verifique seu e-mail</h2>
            <p>Enviamos instruções de recuperação para <strong>{{ forgotForm.get('email')?.value }}</strong>.</p>
            <p class="hint">Não chegou? Verifique sua caixa de spam.</p>
            
            <a routerLink="/login" class="btn-link">Voltar para o Login</a>
        </div>
    } 
    
    @else {
        <h2>Recuperar Senha</h2>
        <p>Digite seu e-mail para receber o link de redefinição.</p>

        <form [formGroup]="forgotForm" (ngSubmit)="onSubmit()" autocomplete="off">
            <div class="form-group">
                <label for="email">Email</label>
                <input 
                    id="email" 
                    type="email" 
                    formControlName="email" 
                    placeholder="seu@email.com"
                    [class.error]="forgotForm.controls.email.invalid && forgotForm.controls.email.touched"
                >
                @if (forgotForm.controls.email.invalid && forgotForm.controls.email.touched) {
                    <div class="error-msg">
                        @if (forgotForm.controls.email.hasError('required')) { <span>Email é obrigatório</span> }
                        @if (forgotForm.controls.email.hasError('email')) { <span>Email inválido</span> }
                    </div>
                }
            </div>

            <button type="submit" [disabled]="forgotForm.invalid || isLoading">
                @if (isLoading) {
                    Enviando...
                } @else {
                    Enviar Link
                }
            </button>
        </form>

        <p><a routerLink="/login">Voltar para Login</a></p>
    }
</div>